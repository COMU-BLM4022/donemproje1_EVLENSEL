---
title: "Q1"
output: html_document
date: "2024-05-22"
---
# Q3: Veri seti keşifsel analizi

## Veri Setinin İncelenmesi

Suburb: Modelimiz için 2. önceliktedir. char.

Address: Veri anlamlığı için önemlidir. Modelimize dahil edilmeyecektir.

Rooms: Oda sayısı fiyatı doğrudan etkileyen çok önemli bir sütundur hiçbir eksik verisi bulunmamaktadır. 
Numeric'tir.

Price: Modelimizin kendisi tamamen bu sütuna bağlıdır eksik verisi bulunmamaktadır. Numeric'tir.

Date: Modelimize dahil edilmeyecektir.

Method: Modelimize dahil edilmeyecektir. 

SellerG: Modelimiz için 2. önceliktedir. char.

Distance: Eve değer biçilirken konumu kesinlikle çok önemlidir. Bizim projemiz için de etkili olacaktır. Numeric'tir.

PostCode: Modelimize dahil edilmeyecektir. 

Type: Modelimiz için 2. önceliktedir. char.

RegionName: Modelimiz için 2. önceliktedir. char.

Propertycount: Modelimiz için 2. önceliklidir. char.

Bedroom: Modelimiz için önemli bir sütündur. Numeric.

Bathroom: Modelimiz için önemli bir sütündur. Numeric.

Car: Modelimiz için önemli bir sütündur. Numeric. Sadece 62 veride eksik bulunmaktadır , eksik veriler ortalama ile doldurulacaktır.

LandSize: Modelimiz için önemli bir sütündur. Numeric.

BuildingArea: Modelimiz için önemli bir sütündur. Numeric. Eksik veriler ortalma ile doldurulacaktır.

Year Built:Modelimiz için önemli bir sütündur. Numeric. Eksik veriler ortalma ile doldurulacaktır.

Lattitude: Modelimize dahil edilmeyecektir.

Longtitude: Modelimize dahil edilmeyecektir.

CouncilArea: Modelimiz için 2. önceliktedir. char.

## Veri Keşfi
Veri setinde 4 sütun dışında eksik veri bulunan sütun bulunmamaktadır. Bu sütunların da kabul edilebilir düzeyde eksik verisi bulunmaktadır. Sayısal veri barındıran sütunlar ortalama ile doldurulmuştur ancak bu işlemde ondalıklı sayı kullanılmamıştır. Bunun bir sebebi tutarsız veriden kaçınmaktır. 1987.5 yılında yapılmış bir bina gibi veyahut 1.76 park yeri gibi değerleri veri setinde bulundurmak istenilmemiştir. Kategorik veri tipinde eksik verisi bulunan sütun mod ile doldurulmuştur. Tespit edilen eksik verilerin oransal anlamda çok az olması sebebiyle modeli manipüle edebilecek bir konuma sahip olmadığına kanaat getirilmiştir. Veri setinde aykırı değer bulunmadığı için ekstra işlem yapılmamıştır.

## Korelasyon analizi 

Aşağıda bir örneğini bulacağınız korelasyon analizinde Price sütunu ile diğer sayısal sütunların korelasyonu bulunmaktadır. Sütunların Price sütunu ile ilişkileri gözlemlenmektedir. Örneğin Rooms sütunu Price ile yüksek ve pozitif bir korelasyona sahiptir. Birinin artışı diğerini arttırmakta birini azalışı diğerini azaltmaktadır. Basit bir analizle oda sayısı arttıkça evin fiyatı artıyor diyebiliriz. Bir diğer örnekte YearBuilt sütunu negatif ve yüksek bir korelasyona sahiptir .Türkiye standartlarında uzak olsa da bir evin eski olması fiyatının da yüksek olmasını beraberinde getiriyor. BuildingArea, PropertCount, LandSize sütunları negatif veya pozitif korelasyonları düşük olması da gösteriyor ki bu sütunların evin fiyatını çok etkilememektedir.

### Korelasyon Tablosu
```{r}
  library(here)
  evlenselPackage::calculate_correlations_with_price_excel(here("melb_data_1.xlsx"),"Price")
  
```

## Dağılım Analizi

```{r}
  library(here)
  evlenselPackage::analyze_distribution(here("melb_data_1.xlsx"),"Landsize")
  
  
  
  
```


## Veri Ön İşleme Adımları 

## Numeric Veriye Çevirme
```{r}
  library("here")
  evlenselPackage::convert_and_write_excel(here("melb_data_1.xlsx"),"Landsize")
```


### Eksik Verilerin Gösterilmesi

Bu fonksiyon, veri setindeki her bir sütun için eksik veri sayısını ve yüzdesini göstermektedir.

```{r}

library(evlenselPackage)
evlenselPackage::load_libraries()
library(here)
evlenselPackage::analyze_missing_data(here("melb_data_1.xlsx"))

```
### Sütun Bazında Eksik Veri Kontrolü

Bu fonksiyon, veri setinde bir sütunda %60 dan fazla değer eksikse o sütunu silecektir. 
Veri seti özelinde hiçbir sütun %60 dan fazla değer eksik değildir ancak ileride eklenebilme ihtimali göz önüne alınmıştır.

```{r}
library(here)
library(evlenselPackage)
evlenselPackage::clean_and_write_excel(here("melb_data_1.xlsx"),here("cleaned.xlsx"))

```

### Eksik Değerlerin İşlenmesi

Yukarıdaki fonksiyonlarda da görüğümüz gibi car, building area, year built, council area sütunlarında eksik verilerimiz bulunmaktadır. Bu verileri dolduralım. 

#### Sayısal Verilerde Ortalama ile doldurma
Veri seti üzerinde ondalıklı sayılar tutarsız veri gibi algılanmaması için ortalama değer en yakın tam sayıya yuvarlanmıştır. Car sütununda 1.75 araçlık park yeri olması gibi. 


Car sütunu
```{r}
  #install.packages("dplyr")
  library(here)
  evlenselPackage::fill_na_with_mean(here("melb_data_1.xlsx"),"Car",here("melb_data_1.xlsx"))
  
```

Building Area sütunu

```{r}
  #install.packages("dplyr")
  library(here)
  evlenselPackage::fill_na_with_mean(here("melb_data_1.xlsx"),"BuildingArea",here("melb_data_1.xlsx"))
  
```

Year Built sütunu

```{r}
  #install.packages("dplyr")
  library(here)
  evlenselPackage::fill_na_with_mean(here("melb_data_1.xlsx"),"YearBuilt",here("melb_data_1.xlsx"))
  
```

#### Kategorik Verilerde Mod ile doldurma
Council Area Sütunu
```{r}
  library(here)
  evlenselPackage::fill_na_with_mode(here("melb_data_1.xlsx"),"CouncilArea",here("melb_data_1.xlsx"))
```



### Model İçin Gerekli Olmayan Satırların Silinmesi

Longtitude
```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"Longtitude",here("melb_data_1.xlsx"))
```

Lattitude
```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"Lattitude",here("melb_data_1.xlsx"))
```

Date
```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"Date",here("melb_data_1.xlsx"))
```

PostCode
```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"PostCode",here("melb_data_1.xlsx"))
```

Address

```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"Address",here("melb_data_1.xlsx"))
```

Method

```{r}
  library(here)
  evlenselPackage::delete_column_from_excel(here("melb_data_1.xlsx"),"Method",here("melb_data_1.xlsx"))
```


### Parametre Olarak Verilen 2 Sütunun Görselleştirilmesi

İstenilen 2 sütunu parametre olarak vermemiz yeterlidir.

Rooms - Price
```{r}
  #install.packages("ggplot2")
  library(here)
evlenselPackage::visualize_columns(here("melb_data_1.xlsx"),"Price","Rooms")
```

Distance - Price
```{r}
  #install.packages("ggplot2")
  library(here)
evlenselPackage::visualize_columns(here("melb_data_1.xlsx"),"Price","YearBuilt")
```


## Model
```{r}
  library(here)
  model_result <- evlenselPackage::train_model(here("melb_data_1.xlsx"))
  
  predictions <- predict_from_model(model_result$model, model_result$test_data)
  head(predictions)
```








